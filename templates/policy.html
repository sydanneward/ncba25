<!DOCTYPE html>
<html lang="en">
<head>
    <title>Policy Scenarios</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>Policy Scenarios for {{ session.get('county', 'your county') }}</header>
    <main>
        <div class="policy-container">
            <!-- Conservative Column -->
            <div class="policy-column">
                <div class="policy-header">CONSERVATIVE :: ${{ scenarios['Conservative']['avg_net'] }}</div>
                <table class="policy-table">
                    {% for year, value in scenarios['Conservative']['yearly_data'].items() %}
                    <tr>
                        <td>{{ year }}</td>
                        <td>
                            <div class="bar" style="width: {{ (value / max_value) * 100 }}%; background-color: {{ 'red' if value < 0 else '#6c8f2c' }}">
                                ${{ max_value }}
                            </div>
                            
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>

            <!-- Moderate Column -->
            <div class="policy-column">
                <div class="policy-header">MODERATE :: ${{ scenarios['Moderate']['avg_net'] }}</div>
                <table class="policy-table">
                    {% for year, value in scenarios['Moderate']['yearly_data'].items() %}
                    <tr>
                        <td>{{ year }}</td>
                        <td>
                            <div class="bar" style="width: {{ (value / max_value) * 100 }}%; background-color: {{ 'red' if value < 0 else '#6c8f2c' }}">
                                ${{ max_value }}
                            </div>
                            
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>

            <!-- High Net Column -->
            <div class="policy-column">
                <div class="policy-header">HIGH NET :: ${{ scenarios['High Net']['avg_net'] }}</div>
                <table class="policy-table">
                    {% for year, value in scenarios['High Net']['yearly_data'].items() %}
                    <tr>
                        <td>{{ year }}</td>
                        <td>
                            <div class="bar" style="width: {{ (value / max_value) * 100 }}%; background-color: {{ 'red' if value < 0 else '#6c8f2c' }}">
                                ${{ max_value }}
                            </div>
                            
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </main>

    <!-- Progress Tracker -->


    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const steps = document.querySelectorAll(".step");
            const lines = document.querySelectorAll(".line");
    
            steps.forEach((step, index) => {
                if (step.classList.contains("active")) {
                    for (let i = 0; i <= index; i++) {
                        steps[i].classList.add("filled");
                        if (i < lines.length) lines[i].classList.add("filled");
                    }
                }
            });
        });
    </script>
            <a href="{{ url_for('email') }}" class="submit-btn">Next</a>

        <div class="progress-tracker">
            <div class="step {{ 'active' if step >= 1 else '' }}">1</div>
            <div class="line {{ 'active' if step >= 2 else '' }}"></div>
            <div class="step {{ 'active' if step >= 2 else '' }}">2</div>
            <div class="line {{ 'active' if step >= 3 else '' }}"></div>
            <div class="step {{ 'active' if step >= 3 else '' }}">3</div>
            <div class="line {{ 'active' if step >= 4 else '' }}"></div>
            <div class="step {{ 'active' if step >= 4 else '' }}">4</div>
        </div>
</body>
</html>
